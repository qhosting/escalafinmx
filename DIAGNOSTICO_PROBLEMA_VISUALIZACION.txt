â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” DIAGNÃ“STICO: PROBLEMA DE VISUALIZACIÃ“N EN EASYPANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA: La aplicaciÃ³n no se visualiza a pesar de:
  âœ… Build completado sin errores
  âœ… Puerto 3000 configurado correctamente
  âœ… Variables de entorno configuradas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ CHECKLIST DE DIAGNÃ“STICO (EN ORDEN DE PRIORIDAD):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  VERIFICAR LOGS DE RUNTIME (NO de build)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En EasyPanel:
  â†’ Ir a la aplicaciÃ³n
  â†’ Click en "Logs" o "Runtime Logs"
  â†’ Buscar mensajes como:

  âœ… Correcto:
     "ğŸš€ Iniciando ESCALAFIN..."
     "âœ… server.js encontrado"
     "ğŸ‰ EJECUTANDO: node server.js"
     "Ready in XXXms"
     "Local: http://localhost:3000"

  âŒ Error:
     "ERROR" / "ECONNREFUSED" / "Cannot find module"
     "âŒ ERROR CRITICO: server.js NO ENCONTRADO"
     "Database connection failed"

COMANDO (si tienes acceso SSH):
  docker logs <container_name> --tail 100 --follow

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2ï¸âƒ£  VERIFICAR QUE EL CONTENEDOR ESTÃ CORRIENDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En EasyPanel:
  â†’ Dashboard de la aplicaciÃ³n
  â†’ Status debe ser "Running" (verde)
  â†’ Si estÃ¡ en "Starting" o "Stopped", hay un problema

Si tienes acceso SSH:
  docker ps | grep escalafin
  
  âœ… Debe mostrar: UP X seconds/minutes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ï¸âƒ£  VERIFICAR CONFIGURACIÃ“N DE PUERTO EN EASYPANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En EasyPanel:
  â†’ Settings â†’ Ports
  â†’ Debe haber una entrada como:

  Container Port: 3000
  Public Port: 80 o 443
  Tipo: HTTP

  âš ï¸ IMPORTANTE:
     - Container Port DEBE ser 3000
     - Public Port puede ser 80, 443, u otro
     - DEBE estar marcado como expuesto/pÃºblico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4ï¸âƒ£  VERIFICAR HEALTH CHECK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El Dockerfile incluye:
  HEALTHCHECK --interval=30s --timeout=10s --start-period=40s

Si el health check falla:
  - EasyPanel puede marcar la app como "Unhealthy"
  - El proxy puede no enrutar trÃ¡fico

Comando para probar health check manualmente:
  docker exec -it <container> /app/healthcheck.sh

  âœ… Debe retornar: "âœ… Health check passed"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5ï¸âƒ£  VERIFICAR VARIABLES DE ENTORNO CRÃTICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En EasyPanel â†’ Settings â†’ Environment Variables:

CRÃTICAS PARA VISUALIZACIÃ“N:

  âœ… NEXTAUTH_URL
     Valor: https://tu-dominio.easypanel.host
     âš ï¸ DEBE ser la URL pÃºblica de EasyPanel

  âœ… DATABASE_URL
     Debe estar correcta y la DB accesible

  âœ… PORT
     Valor: 3000 (o el puerto que uses)

  âœ… HOSTNAME
     Valor: 0.0.0.0

  âœ… NODE_ENV
     Valor: production

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6ï¸âƒ£  PROBAR ACCESO DIRECTO AL CONTENEDOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si tienes acceso SSH al servidor de EasyPanel:

# Probar desde dentro del contenedor
docker exec -it <container> wget -O- http://localhost:3000

  âœ… Debe retornar HTML de la pÃ¡gina
  âŒ Si falla, el problema es en la app (no en proxy)

# Probar desde el host
curl http://localhost:<public_port>

  âœ… Debe retornar HTML
  âŒ Si falla, el problema es en el proxy de EasyPanel

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7ï¸âƒ£  VERIFICAR DNS Y DOMINIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En EasyPanel:
  â†’ Settings â†’ Domains
  â†’ Debe haber un dominio configurado

Probar DNS:
  nslookup tu-dominio.easypanel.host

  âœ… Debe resolver a la IP del servidor

Probar en navegador:
  https://tu-dominio.easypanel.host

  âŒ Si da timeout: problema de proxy/firewall
  âŒ Si da 502/503: app no estÃ¡ escuchando
  âŒ Si da 404: proxy funciona pero app tiene problema

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8ï¸âƒ£  USAR start-improved.sh PARA MÃS LOGGING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El nuevo Dockerfile ya usa start-improved.sh que tiene:
  - âœ… Logging detallado de cada paso
  - âœ… VerificaciÃ³n de archivos crÃ­ticos
  - âœ… Estado de migraciones DB
  - âœ… Mensajes de error claros

Los logs ahora muestran:
  "ğŸš€ Iniciando ESCALAFIN..."
  "ğŸ” Verificando archivos de Next.js standalone..."
  "âœ… server.js encontrado en /app/server.js"
  "ğŸ‰ EJECUTANDO: node server.js"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
9ï¸âƒ£  SI TODO FALLA: MODO EMERGENCIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si sospechas que las verificaciones de DB causan problemas:

Modificar Dockerfile temporalmente:
  # Cambiar la Ãºltima lÃ­nea de:
  CMD ["dumb-init", "sh", "/app/start-improved.sh"]
  
  # A:
  CMD ["dumb-init", "sh", "/app/emergency-start.sh"]

emergency-start.sh:
  - Salta todas las verificaciones
  - Ejecuta directamente: node server.js
  - Ãštil para confirmar que el problema es DB/migraciones

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ DIAGNÃ“STICO MÃS COMÃšN:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA #1: NEXTAUTH_URL incorrecta (50% de casos)
  SÃ­ntoma: Build OK, pero login/pÃ¡gina no cargan
  SoluciÃ³n: Actualizar NEXTAUTH_URL a la URL pÃºblica correcta

PROBLEMA #2: Puerto no expuesto (30% de casos)
  SÃ­ntoma: Contenedor running, pero no accesible
  SoluciÃ³n: Verificar Settings â†’ Ports en EasyPanel

PROBLEMA #3: Health check fallando (15% de casos)
  SÃ­ntoma: App marca como "Unhealthy"
  SoluciÃ³n: Revisar logs, verificar /api/health endpoint

PROBLEMA #4: Error runtime en server.js (5% de casos)
  SÃ­ntoma: Contenedor se reinicia constantemente
  SoluciÃ³n: Revisar logs detallados de runtime

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š RESUMEN RÃPIDO:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para diagnosticar en 5 minutos:

1. Ver logs de runtime â†’ Â¿Dice "Ready in XXXms"?
2. Status del contenedor â†’ Â¿Running (verde)?
3. Puerto 3000 expuesto â†’ Â¿Configurado en EasyPanel?
4. NEXTAUTH_URL â†’ Â¿Es la URL pÃºblica correcta?
5. Probar health check â†’ Â¿Pasa?

Si TODOS son âœ… pero no se ve â†’ Problema es proxy de EasyPanel

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SIGUIENTE PASO: Compartir los logs de runtime para diagnÃ³stico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
